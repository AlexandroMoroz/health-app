<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/main.css">
  <title>Sacar turno</title>
  <!-- Incluimos las librerÃ­as de jQuery y jQuery UI para el calendario-->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
</head>

<body>
  <!-- NAVBAR -->
  <header th:replace="fragments/navbar :: nav_bar"></header>

  <div th:if="${paso==1}">
    <form method="GET" th:action="@{/consulta/especialidad}">
      <div class="form-group my-3">
        <label class="form-label">Seleccione provincia</label>
        <select class="custom-select" name="provincia" required>
          <option th:each="provincia : ${provincias}" th:value="${provincia}" th:text="${provincia}">
        </select>
      </div>
      <button type="submit" class="btn btn-primary mt-3 botones">Siguiente</button>
    </form>
  </div>

  <div th:if="${paso==2}">
    <p th:text="'Usted selecciono la provincia de ' + ${provincia}"></p>
    <form method="GET" th:action="@{/consulta/profesional}">
      <input name="provincia" th:value="${provincia}" hidden>
      <div class="form-group my-3">
        <label class="form-label">Seleccione especialidad</label>
        <select class="custom-select" name="especialidad" required>
          <option th:each="especialidad : ${especialidades}" th:value="${especialidad}" th:text="${especialidad}">
        </select>
      </div>
      <button type="submit" class="btn btn-primary mt-3 botones">Siguiente</button>
    </form>
  </div>

  <div th:if="${paso==3}">
    <p th:text="'Usted selecciono la provincia de ' + ${profesionales[0].provincia}"></p>
    <p th:text="'Usted selecciono la especialidad de ' + ${profesionales[0].especialidad}"></p>
    <form method="GET" th:action="@{/consulta/disponibilidad}">
      <div class="form-group my-3">
        <label class="form-label">Seleccione profesional</label>
        <select class="custom-select" name="idProfesional" required>
          <option th:each="profesional : ${profesionales}" th:value="${profesional.id}"
            th:text="${profesional.nombre + ' ' + profesional.apellido}">
        </select>
      </div>
      <button type="submit" class="btn btn-primary mt-3 botones">Siguiente</button>
    </form>
  </div>

  <div th:if="${paso==4}">
    <p th:text="'Usted selecciono la provincia de ' + ${profesional.provincia}"></p>
    <p th:text="'Usted selecciono la especialidad de ' + ${profesional.especialidad}"></p>
    <p th:text="'Usted selecciono el profesional ' + ${profesional.nombre + ' ' + profesional.apellido}"></p>
    <form method="GET" th:action="@{/consulta/horario}">
      <input name="idProfesional" th:value="${profesional.id}" hidden>
      <label for="fecha">Dias Disponibles</label>
      <input type="text" id="calendario" name="fecha">
      <button type="submit" class="btn btn-primary mt-3 botones">Siguiente</button>
    </form>
  </div>

  <div th:if="${paso==5}">
    <p th:text="'Usted selecciono la provincia de ' + ${profesional.provincia}"></p>
    <p th:text="'Usted selecciono la especialidad de ' + ${profesional.especialidad}"></p>
    <p th:text="'Usted selecciono el profesional ' + ${profesional.nombre + ' ' + profesional.apellido}"></p>
    <p th:text="'Usted selecciono el fecha ' + ${fecha}"></p>
    <form method="GET" th:action="@{/consulta/reservar}">
      <input name="idProfesional" th:value="${profesional.id}" hidden>
      <input name="fecha" th:value="${fecha}" hidden>
      <label for="fecha">Horarios Disponibles</label>
      <select class="custom-select" name="horario" required>
        <option th:each="horario : ${horarios}" th:value="${horario}"
          th:text="${horario+':00'}">
      </select>
      <button type="submit" class="btn btn-primary mt-3 botones">Finalizar</button>
    </form>
  </div>

  <!-- FOOTER -->
  <div th:replace="fragments/footer :: footer"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>

  <script type="text/javascript" th:inline="javascript"> var lista = [[${fechas}]] </script>
  <script th:src="@{/js/calendario.js}" type="text/javascript" th:inline="javascript"></script>
</body>

</html>