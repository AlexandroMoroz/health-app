<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/main.css">
  <title>Health Service App</title>
  <script type="text/javascript" th:src="@{/js/preview_img.js}"></script>
</head>

<body>
  <!-- NAVBAR -->
  <header th:replace="fragments/navbar :: nav_bar"></header>
  <div class="container">

    <form class="formulario p-3" th:action="@{/profesional/registro}" method="POST" enctype="multipart/form-data">
      <div class="mb-3">
        <label for="formFile" class="form-label"></label>
        <img id="previewImg" src="#" alt="Tu imagen" th:src="@{/perfil/imagen}" />
        <input class="form-control" type="file" name="imagen" id="formFile" accept="image/*" max-file-size="1024"
          onchange="actualizarVistaPrevia();">
      </div>

      <div class="mb-3">
        <label class="form-label">Ingresar Nombre</label>
        <input type="text" class="form-control" name="nombre" placeholder="Alberto Juan" required
          th:if="${tipo} == 'Profesional'" th:value="${profesional.nombre}">
        <input type="text" class="form-control" name="nombre" placeholder="Alberto Juan" required
          th:if="${tipo} == 'Usuario'">
      </div>

      <div class="mb-3">
        <label class="form-label">Ingresar Apellido</label>
        <input type="text" class="form-control" name="apellido" placeholder="Caseres" required
          th:if="${tipo} == 'Profesional'" th:value="${profesional.apellido}">
        <input type="text" class="form-control" name="apellido" placeholder="Caseres" required
          th:if="${tipo} == 'Usuario'">
      </div>

      <div class="mb-3">
        <label class="form-label">Ingresar Domicilio</label>
        <input type="text" class="form-control" name="domicilio" placeholder="San Martin 1150" required
          th:if="${tipo} == 'Profesional'" th:value="${profesional.domicilio}">
        <input type="text" class="form-control" name="domicilio" placeholder="San Martin 1150" required
          th:if="${tipo} == 'Usuario'">
      </div>

      <div class="mb-3">
        <label class="form-label">Ingresar DNI</label>
        <input type="number" name="dni" placeholder="95478532" min="0" required th:if="${tipo} == 'Profesional'"
          th:value="${profesional.dni}">
        <input type="number" name="dni" placeholder="95478532" min="0" required th:if="${tipo} == 'Usuario'">
      </div>

      <div class="mb-3">
        <label class="form-label">Seleccionar Sexo</label>
        <select class="custom-select" name="sexo" required th:if="${tipo} == 'Profesional'">
          <option th:each="sexo : ${sexos}" th:value="${sexo}" th:text="${sexo}" th:selected="${profesional.sexo}">
        </select>
        <select class="custom-select" name="sexo" required th:if="${tipo} == 'Usuario'">
          <option th:each="sexo : ${sexos}" th:value="${sexo}" th:text="${sexo}">
        </select>
      </div>

      <div class="mb-3">
        <label for="fecha">Fecha De Nacimiento</label>
        <input type="date" name="fechaNacimiento" id="fecha" required th:if="${tipo} == 'Profesional'"
          th:value="${#dates.format(profesional.fechaNacimiento, 'yyyy-MM-dd')}">
        <input type="date" name="fechaNacimiento" id="fecha" required th:if="${tipo} == 'Usuario'">
      </div>

      <div class="mb-3">
        <label class="form-label">Ingresar Matricula</label>
        <input type="text" class="form-control" name="matricula" placeholder="A54782-T" required
          th:if="${tipo} == 'Profesional'" th:value="${profesional.matricula}">
        <input type="text" class="form-control" name="matricula" placeholder="A54782-T" required
          th:if="${tipo} == 'Usuario'">
      </div>

      <div class="mb-3">
        <label class="form-label">Seleccionar Provincia</label>
        <select class="custom-select" name="provincia" required th:if="${tipo} == 'Profesional'">
          <option th:each="provincia : ${provincias}" th:value="${provincia}" th:text="${provincia}"
            th:selected="${profesional.provincia}">
        </select>

        <select class="custom-select" name="provincia" required th:if="${tipo} == 'Usuario'">
          <option th:each="provincia : ${provincias}" th:value="${provincia}" th:text="${provincia}">
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Seleccionar Especialidad</label>
        <select class="custom-select" name="especialidad" required th:if="${tipo} == 'Profesional'">
          <option th:each="Especialidad : ${especialidades}" th:value="${Especialidad}" th:text="${Especialidad}"
            th:selected="${profesional.especialidad}">
        </select>

        <select class="custom-select" name="especialidad" required th:if="${tipo} == 'Usuario'">
          <option th:each="Especialidad : ${especialidades}" th:value="${Especialidad}" th:text="${Especialidad}">
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label">Seleccionar Dias Laborales</label>
        <input type="checkbox" name="diasLaborales" th:if="${tipo} == 'Usuario'" th:each="dia :${dias_laborales}"
          th:value="${dia}" th:text="${dia}"/>

        <input type="checkbox" name="diasLaborales" th:if="${tipo} == 'Profesional'" th:each="dia :${dias_laborales}"
          th:value="${dia}" th:text="${dia}" th:checked="${#arrays.contains(profesional.disponibilidad.dias, dia.toString())}"/>
      </div>

      <div class="mb-3">
        <label class="form-label">Seleccionar Horarios</label><br>
        <div th:if="${tipo} == 'Usuario'">
          <label class="form-label">Inicio de jornada</label>
          <input type="number" name="entrada" min="0" max="23" step="1" required>
          <label class="form-label">Inicio de descanso</label>
          <input type="number" name="inicio_descanso" min="0" max="23" step="1" required>
          <label class="form-label">Fin de descanso</label>
          <input type="number" name="fin_descanso" min="0" max="23" step="1" required>
          <label class="form-label">Fin de jornada</label>
          <input type="number" name="salida" min="0" max="23" step="1" required>
        </div>
        <div th:if="${tipo} == 'Profesional'">
          <label class="form-label">Inicio de jornada</label>
          <input type="number" name="entrada" min="0" max="23" step="1" th:value="${profesional.disponibilidad.entrada}" required>
          <label class="form-label">Inicio de descanso</label>
          <input type="number" name="inicio_descanso" min="0" max="23" step="1" th:value="${profesional.disponibilidad.inicioDescanso}" required>
          <label class="form-label">Fin de descanso</label>
          <input type="number" name="fin_descanso" min="0" max="23" step="1" th:value="${profesional.disponibilidad.finDescanso}" required>
          <label class="form-label">Fin de jornada</label>
          <input type="number" name="salida" min="0" max="23" step="1" th:value="${profesional.disponibilidad.salida}" required>
        </div>
      </div>
      <button type="submit" class="btn btn-primary mt-3 botones">Enviar</button>
    </form>
  </div>
  <div class="container">

    <div th:replace="fragments/footer :: footer"></div>
</body>

</html>